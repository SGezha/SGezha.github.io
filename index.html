<!doctype html>
<html lang="en">
    <head>
        <noscript><meta http-equiv="refresh" content="0; url=no-js/" /></noscript>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title id="title">My homepage</title>
        <link rel="shortcut icon" id="favicon" type="image/png" :href="favicon"/>
        <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
        <link rel="stylesheet" href="css/master.css">
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css" integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    </head>
    <body>
        <div id="bg"></div>
        <div id="app">
            <div class="container-fluid">
                <div class="initial-page-wrapper">
                    <div class="profile-preview text-center mt-5">
                        <div class="avatar-block">
                          <img class="avatar rounded-circle" :src="avatar">
                        </div>
                        <h1><a class="username-lg">{{username}}</a></h1>
                        <p style="color: #fff !important;" class="description">{{description}}</p>
                        <p style="color: #fff !important;" class="status font-weight-light">{{status}} <i @click="getRandomStatus" class="fas fa-sync-alt"></i></p>
                    </div>
                    <div class="social-media-links-wrapper text-center mt-4">
                        <a :href="account.url" class="social-url-wrapper p-2" v-for="account in social_media">
                            <i :class="account.fa_icon" class="social-media-icon p-2 rounded" :style="{color: account.color}"></i>
                        </a>
                    </div>
                </div>
                <hr class="w-100 mt-5">
                <div class="row text-center mt-5">
                    <div class="col-sm my-3">
                        <h2 class="fs-35 font-weight-light">Latest commit</h2>
                        <a :href="latest_commit_url" class="ff-mono latest-link">{{latest_commit_message}}</a>
                        <br>
                        <span class="commit-date text-muted">{{latest_commit_date}} in <a :href="latest_commit_repo_url" class="ff-mono">{{latest_commit_repo}}</a></span>
                    </div>
                    <div class="col-sm my-3">
                        <h2 class="fs-35 font-weight-light">Latest follower</h2>
                        <img width="25" height="25" :src="latest_follower_avatar" class="rounded-circle border">
                        <a :href="latest_follower_url" class="ff-mono latest-link">{{latest_follower_username}}</a>
                        <p class="text-muted">#{{user_followers_count}}</p>
                    </div>
                    <div class="col-sm my-3">
                        <h2 class="fs-35 font-weight-light">Latest repository</h2>
                        <a :href="latest_repo_url" class="ff-mono latest-link">{{latest_repo_name}}</a>
                        <br>
                        <span class="commit-date text-muted">{{latest_repo_date}}</span>
                    </div>
                </div>
            </div>
        </div>
        <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
        <script src="js/lib.js"></script>
        <script src="js/master.js"></script>
        <script>
            window.onload = bgChange();
            async function bgChange() {
                let img = await axios.get(`https://nekos.life/api/v2/img/wallpaper`);
                var myImage = new Image;
                myImage.src = img.data.url;

                waitForImageToLoad(myImage).then(() => {
                    document.querySelector(`#bg`).style.background = `url("${img.data.url}") center center / cover`;
                    setTimeout(() => { bgChange(); }, 3000)
                });                
            }

            function waitForImageToLoad(imageElement){
                return new Promise(resolve=>{imageElement.onload = resolve})
            }
        </script>
    </body>
</html>